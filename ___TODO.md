# Taf en cours

L√©gende :

- üöÄ  En cours / **1 MAX A LA FOIS**
- ‚úÖ  Termin√©
- ‚è©  Suite
- üöß  WIP / Work In Progress / Entam√©, pas termin√©
- üìå  A tester
- üîç  Lecture/Vid√©os
- üå±  Plus tard, besoin d√©pendance ou flemme sur le coup
- ‚ôªÔ∏è  R√©current
- üöö  Contenus/notes dans les autres fichiers TODO
- üí©  KO
- ‚è≥ en attente
- ü§è Petite partie

## üöÄ Priorisation, simple ‚è©

Indiquer ici les *t√¢ches √† effectuer en priorit√©*

- Si besoin de focus, mettre une ou 2 t√¢ches ici.

1. ‚è≥ Virement remb emprunt
2. WP picard > spam (g√©rer akismet avec fabien)
3. Picard > [Facture NDD](https://mail.google.com/mail/u/0/#inbox/FMfcgzGkXmXskZGnssdlnZBXTBWbFbzg)
4. CPF
5. Appeler damien pour aout
   1. Inviter guillaume wawrhammers
6. Appeler parents > Lit vigi stock√© dans ma chambre
7. G√©rer d√©m√©nagement box sfr, voir avec Pierre
8. ‚è≥ R√©servation Black sheep 3 juillet 8 personnes
   1. Attente confirmation

Trucs sur le **Serveur**

1. Nouveau NDD masa > demo.masamune.fr afin de pouvoir montrer le d√©ploiement
2. forge playbookS
    1. playbooks suppl√©mentaires
       1. ‚úÖ stop stack / ansible-install-web-server\ansible\51-stop-traefik-service.yml
          1. üöÄüöÄüöÄ Cr√©er une r√¥le quand m√™me, sinon la t√¢che ne sera dispo qu'apr√®s g√©n√©ration (pas de possibilit√© de ponctuel, etc.)
       2. Generated doc
          1. prefix 100-
          2. √† la racine √©galement
       3. ‚úÖ Utiliser const_prefix pour la generation de starts
          1. 100---hello--masamune--fr---nginx-stack--start--generated
          2. la^
       4. uninstall stack (stop + rm volumes)
          1. Cr√©ation du r√¥le
          2. G√©n√©ration playbook par site (se baser sur start > deploy)
       5. save volumes ponctuel
          1. Cr√©ation de l'arborescence, attention au r√©pertoire ann√©e courante
       6. Cr√©ation d'un utilisateur ubuntu pour connexion ssh, qui remplace ftp (cl√© publique priv√©e, etc.)
          1. Note: Probablement moyen de faire qu'un seul r√¥le, utilis√© dans tous les playbooks webs
          2. R√¥le ajout
          3. R√¥le suppression
       7. Pr√©voir dev & prod > 1 seul script mais url change, m√™me users & pass
          1. [Bonnes pratiques docker/compose](https://nickjanetakis.com/blog/best-practices-around-production-ready-web-apps-with-docker-compose)
             1. Variables d'environnement dans DC
          2. Check ansible > vars d'environnement afin de maj dev. ou prod
          3. Gestion dev/prod : 1 seul fichier
          4. ENV vars ++
          5. Volumes en fonction de l'environnement ¬§_¬§
3. harmoniser builder guy > tout THE_BUiLDER_GUY, idem autres XXX_GUY
4. Tutum > remplacer par nginx
    1. Faire tourner d√©j√† ca serait bien, go ctrl + f "curated"
    2. Utiliser vars d'environnement pour refaire un tutum mayzon: image + nom conteneur
5. Bitnami
    1. [Github issues](https://github.com/bitnami/bitnami-docker-mysql/issues/79#issuecomment-545477842) > Variable d'env afin d'augmenter le debug des conteneurs bitnami ! >> raisons explicites sur le probl√®me de boot du conteneur
    2. Gestion notes dans ansible-install-web-server/ansible/203-setup-wordpress-lapie_secret.yml
    3. Lourder si serveurs web classique stabilit√© 100%, +1 speed
    4. Activer modules php
    5. Http 2/3
6. Mise en place d'une admin SQL > [phpmyadmin](https://hub.docker.com/_/phpmyadmin)
    1. Objectif 1 : Go nginx sur pma-test-wordpress.masamune.fr
        1. üöÄ .yml ind√©pendant
        2. .yml de test-wordpress
    2. Objectif 2 : Go pma sur pma-test-wordpress.masamune.fr
       1. ^ Check DNS
7. Monitoring > MOD: 4-setup-core-services.yml
    1. Alternative ? [traefik pilot](https://doc.traefik.io/traefik-pilot/)
    2. Alerte si CPU/RAM > 75%
    3. Alerte si space disque libre < 20%
    4. Checker ce qui prend de la place sur le disque ~80Go ? 13% de 450 > `docker system df -v` ; cf. backup des volumes
8. Gestion des mails propre
    1. Connexion au serveur SMPT du serveur ? cf. utils-emails
    2. [Conteneur postfix ?](https://hub.docker.com/_/postfixadmin)
    3. Ajout SPF/DKIM/DMARC
    4. Maj lapie & nonore
9. Tester conteneurs de serveurs (facilit√©/stabilit√©/vitesse/http3)
    1. ‚úÖ NDDs
       1. Need modules de cache php activ√©s
       2. HTTP 2/3 serait un vrai plus
    2. [Apache](https://hub.docker.com/_/httpd) / test-httpd.masamune.fr
    3. [Nginx](https://hub.docker.com/_/nginx) / test-nginx.masamune.fr
       1. üîç [Video configuration](https://www.youtube.com/watch?v=C5kMgshNc6g)
       2. Tune server for [nginx performance](https://www.nginx.com/blog/10-tips-for-10x-application-performance/)
       3. [+1](https://blog.monitis.com/blog/6-best-practices-for-optimizing-your-nginx-performance/)
    4. [Caddy](https://hub.docker.com/_/caddy) / test-caddy.masamune.fr
    5. Litespeed : [open](https://hub.docker.com/r/litespeedtech/openlitespeed) / [payant ?](https://hub.docker.com/r/litespeedtech/litespeed)
       1. 2-3 trucs/plugins a regarder en plus pour WP : [doc](https://www.litespeedtech.com/open-source) & [site d√©di√©](https://lscache.io/)
       2. test-litespeed.masamune.fr
    6. üå± Chaque serveur > Tester WP (install via wp-cli ?)
10. Cleaner / Relancer clients actuels
    1. Lapie
       1. Cleaner au niveau du serveur dashed-uri > .com ou .fr
    2. Nonore
       1. (wp g√©n√©r√© et lancement depuis ansible), Pour le moment c'est un yml lanc√© a l'arrache sur le serveur
    3. Backups volumes
       1. Maj ansible-install-web-server/commandes-backup-volumes-a-la-maing_secret.md (dashed notation)
       2. (normalement d'ici la les roles de backups seront g√©n√©r√©s auto :3)
       3. Backup
11. Gestion des backups
    1. Ajout au CRON
    2. Envoi vers serveur de backup + rotation/sauvegarde incr√©mentielle
12. Lint done : ansible-install-web-server > README.MD
13. Ansible convenience
    1. Clean templating, variable [deprecated ansible_managed](https://docs.ansible.com/ansible/2.4/intro_configuration.html#ansible-managed)
        1. [?](https://docs.ansible.com/ansible/latest/reference_appendices/config.html#default-managed-str)
    2. [ansible prompt](https://docs.ansible.com/ansible/latest/user_guide/playbooks_prompts.html)
14. install-dev-env > docker-compose pour les principales technos : js & phpay

### Sinon, priorisation classique

1. T√¢ches r√©currentes
2. T√¢ches en attente
3. T√¢ches critiques
4. T√¢ches WIP
5. T√¢ches rapides
6. Autres fichiers TODO

## ‚ôªÔ∏è T√¢ches r√©currentes ‚ôªÔ∏è

T√¢ches √† *v√©rifier au moins une fois par semaine*, afin d'√©viter un bordel plus tard/exponentiel

- ‚úÖ D√©placer les termin√©s ‚úÖ √† chaque d√©but de semaine dans done.md
- üí© D√©placer les TODO üå± dans _TODO_shame.md
- ‚úÖ Shame TODOs : Extraire ici (### Shame) les emplois du temps stock√©s sur mails, edt portable, favoris, bureau. Si possible description + lien.
- ‚úÖ Nettoyer le fichier __TODO
  - ‚úÖ Status
  - ‚úÖ Ce fichier > ### Shame
    - ‚úÖ Ranger dans fichiers TODO correspondant
    - ‚úÖ Prioriser
- ‚úÖ Virer ce qui traine
  - ‚úÖ sur le bureau
  - üí© dans le dossier _shame du bureau
  - üí© Lel (local)/Mes documents/_dev/_shame
  - ‚úÖ Vider corbeille
  - ‚úÖ Vider t√©l√©chargements
  - ‚úÖ Dans les mails
- ‚úÖ D√©placer veille onglets dans TODO_veille
- üí© Ranger DD boulot
- üí© Lel Veille / Un truc par semaine, genre le vendredi aprem, a githuber
- ‚úÖ D√©claration Auto entrepreneur
- ‚úÖ V√©rifier imp√¥ts sur espace / Derni√®re v√©rif 22/06/2021
  - ‚úÖ Perso
  - ‚úÖ Pro
- ‚úÖ Maj locales / Environnement de dev / Derni√®re maj le 01/06/21
  - ‚úÖ Windaube update
  - ‚úÖ Docker desktop (tray > ic√¥ne > RC > Check for updates) / Attention, besoin de red√©marrer a la main pour installation
  - ‚úÖ WSL
    - ‚úÖ Version Ubuntu
      - ‚úÖ Si majeure, r√©-effectuer [install-dev-env](https://github.com/youpiwaza/install-dev-env)
    - ‚úÖ Packages & terminal, `omz update && git -C ${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/themes/powerlevel10k pull && sudo apt update && sudo apt -y upgrade`
- ‚úÖ Maj serveur, script maintenance
  - ‚úÖ `98-maintenance.yml & sudo apt -y update && sudo apt -y upgrade` & reboot si besoin
  - ‚úÖ Maj Lapie HMAC
- ‚úÖ Tout est Versionn√©, pas de WIP qui tra√Æne

## ‚è≥ En attente

Rieng

### ‚è≥üå± V√©rifications sur la longueur

- üå± Imp√¥ts > Pas d'avis de CFE ?
  - R√©ponse par mail le 26/11/20, CA non transmis pour le moment, avis et pr√©l√®vement courant 2021
  - Toujours rien au 01/01/21
  - Toujours rien au 10/02/21
  - Toujours rien au 12/05/21
  - Site KO au 15/05/21 (maintenance ?), toujours KO le 19/05/21
  - Toujours rien au 26/05/21
  - Toujours rien au 01/06/21
  - Toujours rien au 22/06/21
  - Toujours rien au 28/06/21
- üå± 21/05/2021 > Heberg picard > Basculer sur nouveau serveur & annuler

## üí• T√¢ches critiques

Bug clients majeurs, interruptions de service, etc.

## üöß WIP üöß

Si travail en cours, indiquer *les notes* ici

## ‚ö°Ô∏è T√¢ches rapides ‚ú®

Indiquer ici les *t√¢ches en dehors du flux g√©n√©ral* (urgences, corrections process, trucs qui perturbent et doivent √™tre fait, t√¢ches ultra rapides, etc.)

1. Migrer ancien serveur
   1. Migrer sites une fois serveur choisi
      1. Lister
         1. Technos
         2. üìåüìåüìåüìåüìåüìåüìå Fichiers
         3. BDD / Exports WordPress
         4. Basculer
2. Ranger liste de lien > premi√®re page + intro
3. __TODO_shame.md > serveur
4. üîç [tmux](https://nickjanetakis.com/blog/who-else-wants-to-boost-their-productivity-with-tmux)
5. üîç [keys remap](https://nickjanetakis.com/blog/remap-and-set-global-hotkeys-on-windows-10-with-auto-hotkey)
6. Lapie > Traitement des t√¢ches en souffrance
   1. Cleaner github dedi√© > client/url-site/
   2. Lapie > Ranger chartes graphiques & lapie-web
   3. Charte graphique > Faire les TODOs
   4. üöö(shame) > Lapie kek.php (Cr√©dit agricole > g√©n√©ration d'un fichier kek.php √† la racine lors de l'insertion de cl√© HMAC > d√©truit au reboot du conteneur)
   5. Lapie, retours SEO
   6. Lapie > üöö([Statut](https://docs.google.com/spreadsheets/d/1zZUT0F4XMQyVAFbP7ihACnRz10pmog5KoYlcaiXOGIk/edit#gid=0))
   7. ~Lapie > Maj traefik pour redirection www. > faire des tests alakon sur NDD masa avant, cf. critique
       1. Maj Ansible
   8. üöö(shame) Acc√®s fichiers bloqu√©s conteneur bitnamiwp, modules php, passer en http2/3
7. Relancer imp√¥ts pro pour CFE
8. Renvoi doc AE d√©cla 0‚Ç¨ ann√©es pass√©es [hey](https://mail.google.com/mail/u/0/#inbox/FMfcgxmXKmkCGqSQkpPRbBrSKWcsbCpr)
9. CPF > Langage des signes / Amazon AWS
10. Cleaner zone DNS masamune.fr

## üí© Shame

Parfois, l'entropie.

Emplois du temps stock√©s sur mail, portable, favoris, bureau.

Extraire ici puis ranger & prioriser. Doit rester vide.

---

---

Tout est extrait :)

---

### Priorisation

Ordonner puis ranger dans le flux. Doit rester vide.

---

Tout est prioris√© :)

---
